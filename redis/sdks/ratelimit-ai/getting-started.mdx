---
title: Getting Started
---

## Steps
<Steps>
	<Step title="Create Redis Instance">
	  For the rate limit to work, we need to create an Upstash Redis and get its
	  credentials. To create an Upstash Redis, you can follow the [Upstash Redis
	  "Get Started" guide](https://upstash.com/docs/redis/overall/getstarted).
	</Step>

	<Step title="Installation">
	  First, we need to install `@upstash/ratelimit-ai`. You can use npm, pnpm, or yarn to install the package from your terminal.
	  <CodeGroup>
	    ```bash npm
		npm install @upstash/ratelimit-ai
		```

	    ```bash pnpm
		pnpm install @upstash/ratelimit-ai
		```

	    ```bash bun 
		bun install @upstash/ratelimit-ai
		```
	  </CodeGroup>
	</Step>

	<Step title="Environment Variables">
		Set up your environment variables. You can find these in your [Upstash Console](https://console.upstash.com/).

		```bash .env
		UPSTASH_REDIS_REST_URL=****
		UPSTASH_REDIS_REST_TOKEN=****
		# Optional: For request scheduling
		QSTASH_TOKEN=****
		```
	</Step>

	<Step title="Initialize RatelimitAI">
		Create a new instance of RatelimitAI with your desired configuration:
		```typescript 
		import { fetchRatelimitAI, RatelimitAI } from "@upstash/ratelimit-ai/openai";
		import { createOpenAI } from '@ai-sdk/openai';

		const ratelimit = new RatelimitAI({
		  RPM: 100,    // Requests per minute
		  RPD: 1000,   // Requests per day
		  TPM: 5000,   // Tokens per minute
		  analytics: true,  // Optional: Enable analytics
		});

		const userid = "user1";
		const openai = createOpenAI({
		  fetch: fetchRatelimitAI(userid, ratelimit)
		});
		```

		RatelimitAI will automatically:
		- Track request counts (RPM, RPD)
		- Track token counts (TPM)
		- Handle rate limiting
		- Schedule requests if configured
	</Step>

	<Step title="Optional: Enable Request Scheduling">
		If you want to automatically retry rate-limited requests, add QStash integration:

		```typescript
		const ratelimit = new RatelimitAI({
		  RPM: 100,
		  RPD: 1000,
		  TPM: 5000,
		  callback: "https://api.example.com/retry",  // Your callback URL
		  analytics: true,
		});
		```

		When a request is rate-limited, RatelimitAI will schedule a retry using QStash. You can then handle the retry in your backend.

	</Step>
</Steps>

## Next Steps
Now that you have RatelimitAI set up, you can:
- Learn about available features in the [Features](./features) section
- See integration examples in the [Examples](./examples) section
- Monitor your usage in the [Upstash Console](https://console.upstash.com/ratelimit)